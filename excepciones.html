<!DOCTYPE html>
<html lang="es">
<meta charset="utf-8">
<script src="
https://gilpglib.github.io/j.js">
</script>
<script>
  title("Excepciones");
  const cA = campo("a:");
  println("");
  println("");
  const cB = campo("b:");
  println("");
  println("");
  botón("Dividir", divide);
  println("");
  println("");
  const sSalida = salida();
  /** Valida que se cumpla una
   * condición y si no, lanza una
   * excepción.
   * @param {any} cond condición
   *  que se debe cumplir.
   * @param {string} mensaje
   *  mensaje que lleva la
   *  excepción que se lanza
   *  cuando la condición no se
   *  cumple.
   * @throws {Error} cuando la
   *  condición no se cumple. */
  function valida(cond, mensaje) {
    if (!cond) {
      throw new Error(mensaje);
    }
  }
  function divide() {
    try {
      /* La property "value" de
       * un campo es el texto
       * capturado.
       * Si el texto es una
       * cadena vacía o no
       * representa un número, el
       * valor devuelto por
       * "parseFloat" es NaN (o
       * sea, no es un número).*/
      const a =
        parseFloat(cA.value);
      const b =
        parseFloat(cB.value);
      /* Debe cumplirse que a
       * sea un número. */
      valida(!isNaN(a),
        "a debe ser un número.");
      /* Debe cumplirse que b
       * sea un número. */
      valida(!isNaN(b),
        "b debe ser un número.");
      /* Debe cumplirse que b
       * sea diferente de 0.
       */
      valida(b !== 0,
        "b no debe ser 0.");
      const resultado = a / b;
      sSalida.value = resultado;
    } catch (e) {
      console.error(e);
      sSalida.value = e.message;
    }
  }
</script>